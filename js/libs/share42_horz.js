/* share42.com | 10.02.2013 | (c) Dimox */
var share42Data = {
  shareStr: 'Share on',
  icons: 'icons_h16.png',
  size: 16,
  order: ['fb', 'twitter', 'googlePlus', 'vk'],
  s: {
    fb: {name: 'Facebook', icon: 1, countName: 'fb',
      clickUrl: 'http://www.facebook.com/sharer.php?s=100&p[url]={u}&p[title]={t}&p[summary]={d}&p[images][0]={i}'},

    twitter: {name: 'Twitter', icon: 2, countName: 'twi', clickUrl: 'https://twitter.com/intent/tweet?text={t}&url={u}'},

    googlePlus: {name: 'Google+', icon: 3, clickUrl: 'https://plus.google.com/share?url={u}'},

    vk: {name: 'VK', icon: 0, countName: 'vk', clickUrl: 'http://vk.com/share.php?url={u}&title={t}&image={i}&description={d}'}
  }
};

function share42HorzWithCount($,selector,params){$(function(){$(selector).each(function(idx){var el=$(this),u=el.attr('data-url'),t=el.attr('data-title'),i=el.attr('data-image'),d=el.attr('data-description'),f=el.attr('data-path');if(!u)u=location.href;function fb_count(url){var shares;$.getJSON('http://graph.facebook.com/?callback=?&ids='+url,function(data){shares=(data[url].shares||0);el.find('a[data-count="fb"]').append('<span>'+shares+'</span>');});}fb_count(u);function twi_count(url){var shares;$.getJSON('http://urls.api.twitter.com/1/urls/count.json?callback=?&url='+url,function(data){shares=data.count;el.find('a[data-count="twi"]').append('<span>'+shares+'</span>');});}twi_count(u);function mail_count(url){var shares;$.getJSON('http://connect.mail.ru/share_count?callback=1&func=?&url_list='+url,function(data){shares=(data.hasOwnProperty(url))?data[url].shares:0;el.find('a[data-count="mail"]').append('<span>'+shares+'</span>');});}mail_count(u);function pin_count(url){var shares;$.getJSON('http://api.pinterest.com/v1/urls/count.json?callback=?&url='+url,function(data){shares=data.count;el.find('a[data-count="pin"]').append('<span>'+shares+'</span>');});}pin_count(u);function lnkd_count(url){var shares;$.getJSON('http://www.linkedin.com/countserv/count/share?callback=?&url='+url,function(data){shares=data.count;el.find('a[data-count="lnkd"]').append('<span>'+shares+'</span>');});}lnkd_count(u);function dlcs_count(url){var shares;$.getJSON('http://feeds.delicious.com/v2/json/urlinfo/data?callback=?&url='+url,function(data){shares=data[0]?data[0].total_posts:0;el.find('a[data-count="dlcs"]').append('<span>'+shares+'</span>');});}dlcs_count(u);function vk_count(url){var shares;$.getScript('http://vk.com/share.php?act=count&index='+idx+'&url='+url);if(!window.VK)window.VK={};window.VK.Share={count:function(idx,number){shares=number;$(selector).eq(idx).find('a[data-count="vk"]').append('<span>'+shares+'</span>');}};}vk_count(u);function odkl_count(url){var shares;$.getScript('http://www.odnoklassniki.ru/dk?st.cmd=extLike&uid='+idx+'&ref='+url);if(!window.ODKL)window.ODKL={};window.ODKL.updateCount=function(idx,number){shares=number;$(selector).eq(idx).find('a[data-count="odkl"]').append('<span>'+shares+'</span>');}}odkl_count(u);function ya_count(url){var shares;$.getScript('http://wow.ya.ru/ajax/share-counter.xml?url='+url);if(!window.Ya)window.Ya={};window.Ya.Share={showCounter:function(number){shares=number;$(selector).eq(idx).find('a[data-count="ya"]').append('<span>'+shares+'</span>');}};}ya_count(u);if(!f){function path(name){var sc=document.getElementsByTagName('script'),sr=new RegExp('^(.*/|)('+name+')([#?]|$)');for(var i=0,scL=sc.length;i<scL;i++){var m=String(sc[i].src).match(sr);if(m){if(m[1].match(/^((https?|file)\:\/{2,}|\w:[\/\\])/))return m[1];if(m[1].indexOf("/")==0)return m[1];b=document.getElementsByTagName('base');if(b[0]&&b[0].href)return b[0].href+m[1];else return document.location.pathname.match(/(.*[\/\\])/)[0]+m[1];}}return null;}f=path('share42.js');}if(!t)t=document.title;if(!i)i='';if(!d){var meta=$('meta[name="description"]').attr('content');if(meta!==undefined)d=meta;else d='';}u=encodeURIComponent(u);t=encodeURIComponent(t);t=t.replace('\'','%27');i=encodeURIComponent(i);d=encodeURIComponent(d);el.html('<span class="share42"></span>');el=$('.share42',el);for(j=0;j<params.order.length;j++){var name=params.order[j];if(params.s[name]){var p=params.s[name];$('<a>',{href:'#',rel:'nofollow',target:'_blank','data-count':p.countName?p.countName:'',title:params.shareStr+' '+p.name,'data-url':p.clickUrl.replace(/\{u\}/g,u).replace(/\{t\}/g,t).replace(/\{d\}/g,d).replace(/\{i\}/g,i)}).append($('<i>').css('background','url('+f+params.icons+') -'+params.size*p.icon+'px 0 no-repeat')).appendTo(el);}}el.on('click','a',function(){window.open($(this).attr('data-url'),'_blank','scrollbars=0, resizable=1, menubar=0, left=100, top=100, width=550, height=440, toolbar=0, status=0');return false;});})})}